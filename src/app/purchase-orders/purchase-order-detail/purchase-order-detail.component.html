<div class="flex flex-col flex-auto w-full">
    <div class="flex flex-col flex-auto w-full">

        <div
            class="absolute inset-x-0 bottom-0"
            *ngIf="isLoading">
            <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
        </div>
        <div class="flex flex-wrap w-full max-w-screen-xl mx-auto p-6 md:p-8">

            <!-- Title and action buttons -->
            <div class="flex items-center justify-between w-full">
                <div>
                    <h2 class="text-3xl font-semibold tracking-tight leading-8">Purchase Order Details</h2>
                    <div class="font-medium tracking-tight text-secondary">Keep track of a Purchase Order</div>
                </div>
            </div>

            <div class="grid grid-cols-1 xl:grid-cols-1 gap-8 w-full mt-8" *ngIf="!isLoading && purchaseOrder">
                <div class="grid gap-8 sm:grid-flow-col xl:grid-flow-row">
                    <!-- Previous statement -->
                    <div
                        class="relative flex flex-col flex-auto p-6 pr-3 pb-3 bg-card rounded-2xl shadow overflow-hidden">
                        <div class="absolute bottom-0 right-0 w-24 h-24 -m-6">
                            <mat-icon
                                class="icon-size-24 opacity-25 text-green-500 dark:text-green-400"
                                [svgIcon]="'heroicons_outline:check-circle'"></mat-icon>
                        </div>
                        <div class="flex items-center">
                            <div class="flex flex-col">
                                <div class="text-lg font-medium tracking-tight leading-6 truncate">PO
                                    Number: {{purchaseOrder.poNumber}} </div>
                                <div class="text-green-600 font-medium text-sm">
                                    Created on {{purchaseOrder.dateReceived | date:'MMM dd, yyyy'}}
                                </div>
                            </div>

                        </div>
                        <div class="flex items-center">
                            <div class="flex flex-col">
                                <!--                            <div class="text-lg font-medium tracking-tight leading-6 truncate">RFQ Description</div>-->
                                <div class="text-green-600 font-medium text-sm">
                                    {{purchaseOrder.description}}
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="flex flex-col">
                                <!--                            <div class="text-lg font-medium tracking-tight leading-6 truncate">RFQ Description</div>-->
                                <div class="text-green-600 font-medium text-sm">
                                    {{purchaseOrder.purchaseOrderDocumentUrl}}
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-row flex-wrap mt-4 -mx-6">
                            <div class="flex flex-col mx-6 my-3">
                                <div class="text-sm font-medium leading-none text-secondary">Date Due</div>
                                <div class="mt-2 font-medium text-3xl leading-none">{{purchaseOrder.due | date}}</div>
                            </div>
                            <div class="flex flex-col mx-6 my-3">
                                <div class="text-sm font-medium leading-none text-secondary">Client</div>
                                <div class="mt-2 font-medium text-3xl leading-none">{{purchaseOrder.clientId }}</div>
                            </div>
                            <div class="flex flex-col mx-6 my-3">
                                <div class="text-sm font-medium leading-none text-secondary">Status</div>
                                <div class="mt-2 font-medium text-3xl leading-none">{{purchaseOrder.status }}</div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- RFQ Details  -->
                <div class="grid grid-cols-1 xl:grid-cols-1 gap-8 w-full mt-8" *ngIf="!isLoading">
                    <div class="grid gap-8 sm:grid-flow-col xl:grid-flow-row" *ngIf="purchaseOrder.rfqId && rfq">
                        <!-- Previous statement -->
                        <div
                            class="relative flex flex-col flex-auto p-6 pr-3 pb-3 bg-card rounded-2xl shadow overflow-hidden">
                            <div class="absolute bottom-0 right-0 w-24 h-24 -m-6">
                                <mat-icon
                                    class="icon-size-24 opacity-25 text-green-500 dark:text-green-400"
                                    [svgIcon]="'heroicons_outline:check-circle'"></mat-icon>
                            </div>
                            <div class="flex items-center">
                                <div class="flex flex-col">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate">RFQ
                                        Number: {{rfq.rfqNumber}} </div>
                                    <div class="text-green-600 font-medium text-sm">
                                        Created on {{rfq.dateCreated | date:'MMM dd, yyyy'}}
                                    </div>
                                </div>

                            </div>
                            <div class="flex items-center">
                                <div class="flex flex-col">
                                    <!--                            <div class="text-lg font-medium tracking-tight leading-6 truncate">RFQ Description</div>-->
                                    <div class="text-green-600 font-medium text-sm">
                                        {{rfq.description}}
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <div class="flex flex-col">
                                    <!--                            <div class="text-lg font-medium tracking-tight leading-6 truncate">RFQ Description</div>-->
                                    <div class="text-green-600 font-medium text-sm">
                                        {{rfq.rfqDocumentUrl}}
                                    </div>
                                </div>
                            </div>
                            <div class="flex flex-row flex-wrap mt-4 -mx-6">
                                <div class="flex flex-col mx-6 my-3">
                                    <div class="text-sm font-medium leading-none text-secondary">Date Due</div>
                                    <div
                                        class="text-orange-600 mt-2 font-medium text-3xl leading-none">{{rfq.due | date:'MMM dd, yyyy'}}</div>
                                </div>
                                <div class="flex flex-col mx-6 my-3">
                                    <div class="text-sm font-medium leading-none text-secondary">Status</div>
                                    <div
                                        class="mt-2 font-medium text-3xl leading-none">{{rfq.status }}</div>
                                </div>
                                <div class="flex flex-row flex-wrap -mx-6">
                                    <div class="flex flex-col mx-6 my-3">
                                        <button
                                            class="px-8"
                                            mat-flat-button
                                            [color]="'primary'"
                                            type="reset"
                                            routerLink="/rfqs/details/{{rfq.id}}">
                                            View RFQ
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 xl:grid-cols-1 gap-8 w-full mt-8" *ngIf="purchaseOrder.items">
                        <!-- Recent transactions table -->
                        <div class="xl:col-span-2 flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                            <div class="p-6">
                                <div class="mr-4 text-3xl font-medium tracking-tight leading-6 truncate">Purchase Order
                                    Items
                                </div>
                            </div>
                            <div class="overflow-x-auto mx-6">
                                <table
                                    class="w-full bg-transparent"
                                    mat-table
                                    matSort
                                    [dataSource]="purchaseOrderItemsDataSource"
                                    #poItemsTable>

                                    <!-- RFQ Item ID -->
                                    <ng-container matColumnDef="poItemId">
                                        <th
                                            mat-header-cell
                                            mat-sort-header
                                            *matHeaderCellDef>
                                            PO Item ID
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let item">
                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                    {{item.id}}
                                </span>
                                        </td>
                                    </ng-container>
                                    <!-- Transaction ID -->
                                    <ng-container matColumnDef="id">
                                        <th
                                            mat-header-cell
                                            mat-sort-header
                                            *matHeaderCellDef>
                                            Item ID
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let item">
                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                    {{item.item.id}}
                                </span>
                                        </td>
                                    </ng-container>

                                    <!-- Date -->
                                    <ng-container matColumnDef="name">
                                        <th
                                            mat-header-cell
                                            mat-sort-header
                                            *matHeaderCellDef>
                                            Name
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let item">
                                <span class="pr-6 whitespace-nowrap">
                                    <a routerLink="/items/details/{{item.item.id}}">{{item.item.name}}</a>
                                </span>
                                        </td>
                                    </ng-container>

                                    <!-- SKU -->
                                    <ng-container matColumnDef="sku">
                                        <th
                                            mat-header-cell
                                            mat-sort-header
                                            *matHeaderCellDef>
                                            SKU
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let item">
                                <span class="pr-6 whitespace-nowrap">
                                    {{item.item.sku}}
                                </span>
                                        </td>
                                    </ng-container>

                                    <!-- Name -->
                                    <ng-container matColumnDef="quantity">
                                        <th
                                            mat-header-cell
                                            mat-sort-header
                                            *matHeaderCellDef>
                                            Quantity
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let item">
                                            <span class="pr-6 whitespace-nowrap">
                                                {{item.quantity}}
                                            </span>
                                        </td>
                                    </ng-container>

                                    <!-- Amount -->
                                    <ng-container matColumnDef="price">
                                        <th
                                            mat-header-cell
                                            mat-sort-header
                                            *matHeaderCellDef>
                                            Price
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let item">
                                                <span class="pr-6 font-medium whitespace-nowrap">
                                                    {{item.priceQuoted | currency:'R'}}
                                                </span>
                                        </td>
                                    </ng-container>

                                    <!-- Supplier -->
                                    <ng-container matColumnDef="supplier">
                                        <th
                                            mat-header-cell
                                            mat-sort-header
                                            *matHeaderCellDef>
                                            Status
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let item">
                                            <span class="leading-relaxed whitespace-nowrap" *ngIf="item.supplier"><a routerLink="/suppliers/details/{{item.supplier.id}}">{{item.supplier.name}}</a></span>

                                        </td>
                                    </ng-container>

                                    <!-- Status -->
                                    <ng-container matColumnDef="status">
                                        <th
                                            mat-header-cell
                                            mat-sort-header
                                            *matHeaderCellDef>
                                            Status
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let item">
                                            <span
                                                class="inline-flex items-center font-bold text-xs px-2.5 py-0.5 rounded-full tracking-wide uppercase"
                                                [ngClass]="{'bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50': item.status === 'pending',
                                                            'bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50': item.status === 'completed'}">
                                                <span class="leading-relaxed whitespace-nowrap">{{item.status}}</span>
                                            </span>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="actions">
                                        <th
                                            mat-header-cell
                                            mat-sort-header
                                            *matHeaderCellDef>
                                            Actions
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let item">
                                            <button
                                                (click)="openDialog(item)">
                                                <mat-icon [svgIcon]="'heroicons_outline:pencil'"></mat-icon>

                                            </button>
                                            <button
                                                (click)="deletePOItem(item.id)">
                                                <mat-icon [svgIcon]="'heroicons_outline:x-circle'"></mat-icon>
                                            </button>
                                        </td>

                                    </ng-container>

                                    <!-- Footer -->
                                    <!--                            <ng-container matColumnDef="recentOrdersTableFooter">-->
                                    <!--                                <td-->
                                    <!--                                    class="py-6 px-0 border-0"-->
                                    <!--                                    mat-footer-cell-->
                                    <!--                                    *matFooterCellDef-->
                                    <!--                                    colspan="6">-->
                                    <!--                                    <button mat-stroked-button>See all transactions</button>-->
                                    <!--                                </td>-->
                                    <!--                            </ng-container>-->
                                    <tr
                                        mat-header-row
                                        *matHeaderRowDef="purchaseOrderItemsTableColumns"></tr>
                                    <tr
                                        class="order-row h-16"
                                        mat-row
                                        *matRowDef="let row; columns: purchaseOrderItemsTableColumns;"></tr>
                                    <!--                            <tr-->
                                    <!--                                class="h-16 border-0"-->
                                    <!--                                mat-footer-row-->
                                    <!--                                *matFooterRowDef="['recentOrdersTableFooter']"></tr>-->
                                </table>
                            </div>
                        </div>

                        <!-- Budget -->
                    </div>

                    <!-- Account balance -->
                    <!--                        <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">-->
                    <!--                            <div class="flex flex-col p-6 pb-4">-->
                    <!--                                <div class="flex items-center justify-between">-->
                    <!--                                    <div class="flex flex-col">-->
                    <!--                                        <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate">Account Balance</div>-->
                    <!--                                        <div class="text-secondary font-medium">Monthly balance growth and avg. monthly income</div>-->
                    <!--                                    </div>-->
                    <!--                                    <div class="ml-2">-->
                    <!--                                        <button-->
                    <!--                                            class="h-6 min-h-6 px-2 rounded-full bg-hover"-->
                    <!--                                            mat-button-->
                    <!--                                            [matMenuTriggerFor]="accountBalanceMenu">-->
                    <!--                                            <span class="font-medium text-sm text-secondary">12 months</span>-->
                    <!--                                        </button>-->
                    <!--                                        <mat-menu #accountBalanceMenu="matMenu">-->
                    <!--                                            <button mat-menu-item>3 months</button>-->
                    <!--                                            <button mat-menu-item>6 months</button>-->
                    <!--                                            <button mat-menu-item>9 months</button>-->
                    <!--                                            <button mat-menu-item>12 months</button>-->
                    <!--                                        </mat-menu>-->
                    <!--                                    </div>-->
                    <!--                                </div>-->
                    <!--                                <div class="flex items-start mt-6 mr-2">-->
                    <!--                                    <div class="flex flex-col">-->
                    <!--                                        <div class="font-semibold text-3xl md:text-5xl tracking-tighter">{{data.accountBalance.growRate}}%</div>-->
                    <!--                                        <div class="font-medium text-sm text-secondary leading-none">Average Monthly Growth</div>-->
                    <!--                                    </div>-->
                    <!--                                    <div class="flex flex-col ml-8 md:ml-16">-->
                    <!--                                        <div class="font-semibold text-3xl md:text-5xl tracking-tighter">{{data.accountBalance.ami | currency:'USD'}}</div>-->
                    <!--                                        <div class="font-medium text-sm text-secondary leading-none">Average Monthly Income</div>-->
                    <!--                                    </div>-->
                    <!--                                </div>-->
                    <!--                            </div>-->
                    <!--                            <div class="flex flex-col flex-auto">-->
                    <!--                                <apx-chart-->
                    <!--                                    class="flex-auto w-full h-full"-->
                    <!--                                    [chart]="accountBalanceOptions.chart"-->
                    <!--                                    [colors]="accountBalanceOptions.colors"-->
                    <!--                                    [fill]="accountBalanceOptions.fill"-->
                    <!--                                    [series]="accountBalanceOptions.series"-->
                    <!--                                    [stroke]="accountBalanceOptions.stroke"-->
                    <!--                                    [tooltip]="accountBalanceOptions.tooltip"-->
                    <!--                                    [xaxis]="accountBalanceOptions.xaxis"></apx-chart>-->
                    <!--                            </div>-->
                    <!--                        </div>-->
                </div>
            </div>
        </div>
    </div>
</div>
